<%= content_for(:page_title) { t(".title") } %>
<%= content_for(:page_description) { t(".description") } %>

<div class="mb-6">
  <h2 class="text-2xl font-bold text-base-content">
    <%= l(@date, format: "%B del %Y").capitalize %>
  </h2>
</div>

<div class="card bg-base-100 shadow-sm mb-6">
  <div class="card-body">
    <div class="card-title">
      <%= t("metrics.today_summary.title") %>
    </div>
    <p class="text-base-content/70 mb-4"><%= t("metrics.today_summary.description") %></p>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="stat bg-base-200 rounded-lg">
        <div class="stat-title"><%= Transaction.model_name.human(count: 2) %></div>
        <div class="stat-value text-primary"><%= @collection.count %></div>
      </div>

      <div class="stat bg-base-200 rounded-lg">
        <div class="stat-title"><%= t(:profit) %>
          (CLP)</div>
        <div class="stat-value text-success"><%= @transactions_profit %></div>
      </div>
    </div>
  </div>
</div>

<div class="card bg-base-100 shadow-sm mb-6">
  <div class="card-body">
    <div class="card-title">
      <%= t("metrics.index.transactions_per_day") %>
    </div>
    <p class="text-sm text-base-content/70 mb-4">
      En promedio ~<%= @transactions_per_day_avg %>
      al d√≠a
    </p>
    <div class="w-full overflow-hidden">
      <%= line_chart @transactions_per_day %>
    </div>
  </div>
</div>

<div class="card bg-base-100 shadow-sm">
  <div class="card-body">
    <div class="card-title">
      <%= t("metrics.index.profit_per_day") %>
    </div>
    <div class="stat-value text-success mb-4"><%= @profit_per_day %></div>
    <div class="w-full overflow-hidden">
      <%= line_chart @collection.group(:created_at).sum(:profit) %>
    </div>
  </div>
</div>
