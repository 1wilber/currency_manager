<%= content_for :page_title do %>
  <%= t(".title") %>
<% end %>

<%= content_for :page_description do %>
  <%= t(".description") %>
<% end %>

<%= content_for :page_actions do %>
  <div class="flex flex-col gap-3">
    <%= form_with(url: [:transactions], method: :get, html: {class: "", data: {controller: "auto-submit"}}) do |f| %>
      <%= f.date_field :by_range,
                   class: "input input-bordered w-full",
                   data: {
                     controller: "date-picker",
                     action: "auto-submit#submit",
                     date_picker_default_date_value: @date_range.strftime("%d/%m/%Y"),
                   } %>
    <% end %>

    <div class="flex flex-col md:flex-row md:gap-3 md:justify-end">
      <%= icon_link t("new"), %i[new transaction], icon: "plus", class: "btn btn-primary" %>

      <%= icon_link t("edit_bank_balances"),
      %i[bank_balances],
      icon: "edit",
      class: "btn btn-outline",
      data: {
        turbo_frame: :modal,
      } %>
    </div>
  </div>
<% end %>

<div class="stats shadow bg-base-100 w-full mb-6">
  <div class="stat">
    <div class="stat-title">
      <%= Transaction.human_attribute_name(:total) %>
      (<%= current_exchange_rate.target %>)
    </div>
    <p class="stat-value"><%= @total %></p>
  </div>

  <div class="stat">
    <h6 class="text-sm font-medium text-base-content/70 mb-1">
      <%= Transaction.human_attribute_name(:amount) %>
      (<%= current_exchange_rate.source %>)
    </h6>
    <p class="stat-value"><%= @total_amount %></p>
  </div>

  <div class="stat">
    <h6 class="text-sm font-medium text-base-content/70 mb-1">
      <%= Transaction.human_attribute_name(:profit) %>
      (<%= current_exchange_rate.source %>)
    </h6>
    <p class="stat-value"><%= @total_profit %></p>
  </div>
</div>

<%= render "list", transactions: @collection %>
